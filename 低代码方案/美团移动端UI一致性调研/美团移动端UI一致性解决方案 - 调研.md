## 美团移动端UI一致性解决方案 - 调研



## 1. 解决什么问题

**改善用户端体验的一致性，提升多技术方案间组件的通用性和复用率，整体降低视觉改版的研发成本。**

- **设计层面**：由于UI缺乏标准化设计规范，在不同App及不同开发语言平台上设计风格不统一，用户体验不一致；设计资源缺乏统一管理手段，无法实现积累沉淀，无法适应新业务的开发需求。
- **开发层面**：组件代码实现碎片化，存在多次开发的情况，质量难以保证；各端代码API不统一，维护拓展成本较高，变更主题、适配Dark Mode等需求难以实现。
- **测试层面**：重复走查，频繁回归，每次发版均需验证组件质量。
- **产品层面**：版本迭代效率低，版本需求吞吐量低，不具备业务的快速拓展能力。

通过抽离成熟的业务场景，建立可提供高质量、可扩展、可统一配置的基于Android/iOS/MRN的组件代码库，使之具备支持多业务高层次的代码复用能力，进而提高UI业务中台能力，使项目保持高度一致性。



**结论：美团UI一致性项目，主要为解决公司旗下多项目UI风格不统一问题。同时通过统一UI风格，提高组件的通用性和复用率。**

**改进：目前多样UI风格需求，要求组件具有更高的灵活性。如何平衡灵活性和复杂度。**

## 2. 方案全景

外卖UI一致性套件由积木工具链、代码组件库、定制化设计云协作平台以及文档化说明（官网）四部分组成。

1. **积木工具链**：通过建立包含相同设计元素的统一物料市场，PM通过Axure插件拾取物料市场中的组件产出原型稿；UI/UE通过Sketch插件落地物料市场中的设计规范，产出符合要求的设计稿。

2. **代码组件库（Android、iOS、MRN）**：设计稿中的组件与RD代码仓库中组件一一对应。

3. **文档化说明**：官网详细描述了代码组件库的集成方式、组件的使用方法，降低开发上手难度，只需要理解接口和职责即可进行业务开发。

4. **定制化设计云协作平台**：与美团内部的印迹团队（云协作平台）合作开发，在RD的设计稿中标注了哪些是代码组件库中已有的元素，避免重复开发，同时关联了官网中该组件的使用说明，是代码组件库与官网的纽带。（**相当在relay上显示组件的代码库地址**）

   

   在给RD的设计稿中标注了哪些是代码组件库中已有的元素，避免了重复开发，同时关联了官网上该组件的使用说明，RD同学在开发过程中遇到组件使用问题无需检索，点击即可跳转至使用文档。

<img src="https://p0.meituan.net/travelcube/d45b92f0c503f6f9d54ca3c570f759b0326916.png@1920w_1164h_80q" alt="外卖UI一致性解决方案" style="zoom: 50%;" />

**使用指南**

1. 设计师逐步将设计语言沉淀为设计规范（包括组件、颜色、字体、图片等）上传至官网供整个设计团队查阅，同时将其量化并内置于积木Sketch插件中；开发同学则将其代码化，针对Android/iOS/MRN三端进行组件库开发。
2. 设计师使用积木Sketch插件绘制设计稿，可以保证设计元素均从既定的设计标准中获取，产出符合业务设计规范的设计稿，而代码组件库中也有对应的实现。
3. 绘制完成的设计稿上传至印迹云协作平台，交付开发同学进行设计稿还原。
4. 开发同学拿到设计稿后，就可以知道本次需求哪些组件已内置于代码组件库中，并可以点击设计稿中的链接，直接查看组件的使用说明。



**结论：美团UI一致性项目。核心就UI/UE设计组件，开发与之对应组件，然后通过relay打通关联。**

**改进：如果Sketch插件能够，根据设计稿生成代码或类代码mxl，能大大提高效率。但具体能生成什么质量代码需调研。**

## 

## 3. 组件搭建

**选择合适粒度**

组件的粒度选择曾是困扰我们很久的一个问题，虽然有构建设计系统的核心理论——原子设计理论为指导，即按照“原子、分子、组织、模板、页面”五个层面进行页面设计。在进行组件制作前，项目同学对外卖的近百个页面进行了梳理，对使用到的组件进行了分类，并根据组件的使用频率进行排序，制定了逐步替换计划。从而避免了组件库做的很全、花费了很多的人力，但实际很多组件都用不上，或者开发的组件过少，覆盖场景不足等问题。

我们将走查结果与设计师反复交流，发现复用性较高的组件大体可以分为两类：第一类“基础控件”，也就是类似于标签、按钮、开关等具备基础功能的元素，对应原子理论中的原子；第二类“业务组件”，类似于商品卡片等，是由“基础控件”组成（比如商品卡片由“标签控件”与“图片控件”组成），同时“业务组件”还能相互组合，成为更高阶的“复杂组件”，类似于原子理论中的分子。“业务组件”的组合又是千变万化的，不同样式的业务组件可以组成类似“商家列表”、“菜品列表”等“模板”，而“模板”与“基本控件”组合在一起，就成为了“页面”。

![外卖DPL模型建立](https://p0.meituan.net/travelcube/e281a1b8d92e1fdad772cd5053246a99939123.png@1920w_911h_80q)



**具备拓展性**

组件必须具备一定的可配置属性才能提升适用场景。可配置属性体现在三个方面：组件支持局部元素展示隐藏，例如商品卡片的标题、说明、价格可根据接口数据控制展示逻辑；组件支持多种样式，例如商品卡片的左图右文排列、上图下文排列；组件支持业务方配置主题，如调整高亮色、调整对齐方式等。

![组件应具有拓展性](https://p0.meituan.net/travelcube/c2e7b7f326b9134450a19d7b5bcb48d931927.png@885w_486h_80q)



**结论：目前市面上类似平台都以控件、组件、模板、页面划分颗粒度。同时为具备一定扩展性支持一定程度的布局。**

## 

## 4. 积木Sketch插件

从设计阶段颜色的选择、字体的规范、控件的样式，到RD开发阶段代码的统一管理、API的制定、多端的实现方式都必须遵守一套规则，通过积木Sketch插件落地设计规范，可以保证设计元素均从既定设计标准中获取，产出符合业务设计语言的设计稿，而各平台UI代码库中也有对应实现。

#### 4.1.1 插件功能

积木Sketch插件经过一段时间的建设，目前已具备Iconfont、标准色板、组件库、数据填充、文字模板等功能。

通过Iconfont可以从公司图标库中拉取设计团队上传的SVG图标，并直接应用于设计稿；标准色板可以限定设计师的颜色使用范围，确保设计稿中的颜色均符合设计规范；组件库中包含从外卖业务抽离的基本控件与通用组件，具有可复用和标准化的特点，并与不同开发语言组件库中的代码一一对应；数据填充库可以使设计师采用真实数据进行填充，使设计稿更贴近线上环境；文字模板中内置了字体样式的使用规范，根据设计稿中文字的位置，点击文字图层即可直接应用。

#### 4.1.2 物料市场

通过Sketch管理后台，设计师可以将配色规范、文字规范、话术、Iconfont、组件库上传至云端并与整个设计团队中成员共享，并可实现设计资产的版本管理。通过将Sketch Library存储在后台物料市场，设计师可以与团队成员共享组件（Symbol），Library可以实现“一处更改，处处生效”，即使是关联了远程组件库历史的设计稿检测到更新时，也会收到Sketch通知，确保工作中使用的是最新组件。

![积木Sketch Plugin 物料管理后台](https://p0.meituan.net/travelcube/1d739dd1be3e7b8e54938a63dc4285ea163210.png@1920w_489h_80q)





